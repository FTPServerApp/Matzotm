<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>לוח בקרה למנהל - מערכת דיווח נוכחות</title>
    <style>
        :root {
            --primary: #3498db;
            --primary-dark: #2980b9;
            --secondary: #2ecc71;
            --secondary-dark: #27ae60;
            --danger: #e74c3c;
            --danger-dark: #c0392b;
            --warning: #f39c12;
            --warning-dark: #d35400;
            --info: #9b59b6;
            --info-dark: #8e44ad;
            --gray: #ecf0f1;
            --dark: #34495e;
            --darker: #2c3e50;
            --light: #f8f9fa;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            direction: rtl;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--dark);
            color: white;
            padding: 1rem;
            text-align: center;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }
        
        .nav-links {
            margin-top: 1rem;
            text-align: center;
        }
        
        .nav-links a {
            color: white;
            text-decoration: underline;
            margin: 0 10px;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .sidebar {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        
        .sidebar h3 {
            color: var(--darker);
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray);
            margin-bottom: 15px;
        }
        
        .sidebar-nav {
            list-style: none;
        }
        
        .sidebar-nav li {
            margin-bottom: 5px;
        }
        
        .sidebar-nav a {
            display: block;
            padding: 10px;
            color: var(--dark);
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.2s ease;
        }
        
        .sidebar-nav a:hover, .sidebar-nav a.active {
            background-color: var(--primary);
            color: white;
        }
        
        .sidebar-nav a i {
            margin-left: 10px;
        }
        
        .main-content {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        
        .panel {
            display: none;
        }
        
        .panel.active {
            display: block;
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray);
        }
        
        .panel-title {
            font-size: 1.8rem;
            color: var(--darker);
        }
        
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-success {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn-success:hover {
            background-color: var(--secondary-dark);
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: var(--danger-dark);
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            background-color: var(--warning-dark);
        }
        
        .btn-info {
            background-color: var(--info);
            color: white;
        }
        
        .btn-info:hover {
            background-color: var(--info-dark);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: right;
            border-bottom: 1px solid var(--gray);
        }
        
        th {
            background-color: var(--light);
            color: var(--darker);
            font-weight: bold;
        }
        
        tr:hover {
            background-color: rgba(236, 240, 241, 0.5);
        }
        
        .action-btn {
            padding: 5px 10px;
            margin-right: 5px;
            font-size: 0.8rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 100%;
            max-width: 600px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray);
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: var(--darker);
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--darker);
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            margin-top: 20px;
            gap: 10px;
        }
        
        .data-control {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .search-box {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .chart-container {
            height: 300px;
            margin-top: 20px;
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .summary-card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
        }
        
        .summary-card h3 {
            font-size: 1.2rem;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .summary-card .value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .import-export-container {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
        
        .file-input {
            display: none;
        }
        
        .file-label {
            padding: 0.5rem 1rem;
            background-color: var(--info);
            color: white;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }
        
        .file-label:hover {
            background-color: var(--info-dark);
        }

        /* Responsive Adjustments */
        @media (max-width: 992px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                margin-bottom: 20px;
            }
            
            .sidebar-nav {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .sidebar-nav li {
                margin-bottom: 0;
            }
        }
        
        @media (max-width: 768px) {
            .panel-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .data-control {
                flex-direction: column;
            }
            
            .summary-cards {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        @media (max-width: 576px) {
            .summary-cards {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 15px;
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>לוח בקרה למנהל</h1>
        <div class="nav-links">
            <a href="index.html">כניסה/יציאה</a>
            <a href="admin.html">ניהול מערכת</a>
        </div>
    </header>
    
    <div class="container">
        <div class="dashboard">
            <div class="sidebar">
                <h3>תפריט ניהול</h3>
                <ul class="sidebar-nav">
                    <li><a href="#" data-panel="dashboard-panel" class="active">לוח מחוונים</a></li>
                    <li><a href="#" data-panel="employees-panel">ניהול עובדים</a></li>
                    <li><a href="#" data-panel="attendance-panel">דוחות נוכחות</a></li>
                    <li><a href="#" data-panel="production-panel">פסי ייצור</a></li>
                    <li><a href="#" data-panel="inventory-panel">מלאי</a></li>
                    <li><a href="#" data-panel="purchases-panel">רכש</a></li>
                    <li><a href="#" data-panel="logs-panel">לוגים</a></li>
                    <li><a href="#" data-panel="settings-panel">הגדרות</a></li>
                </ul>
            </div>
            
            <div class="main-content">
                <!-- Dashboard Panel -->
                <div class="panel active" id="dashboard-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">לוח מחוונים</h2>
                        <div>
                            <button class="btn btn-primary" id="refresh-dashboard">רענון</button>
                        </div>
                    </div>
                    
                    <div class="summary-cards">
                        <div class="summary-card">
                            <h3>עובדים רשומים</h3>
                            <div class="value" id="employee-count">0</div>
                        </div>
                        <div class="summary-card">
                            <h3>עובדים נוכחים</h3>
                            <div class="value" id="present-count">0</div>
                        </div>
                        <div class="summary-card">
                            <h3>פריטים במלאי</h3>
                            <div class="value" id="inventory-count">0</div>
                        </div>
                        <div class="summary-card">
                            <h3>הזמנות פתוחות</h3>
                            <div class="value" id="orders-count">0</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <!-- Charts will be rendered here -->
                        <div style="text-align: center; padding: 100px 0; color: #777;">
                            גרף נוכחות יוצג כאן
                        </div>
                    </div>
                    
                    <div class="import-export-container">
                        <button class="btn btn-primary" id="export-all-data">ייצוא כל הנתונים (JSON)</button>
                        <input type="file" id="import-file" class="file-input" accept=".json">
                        <label for="import-file" class="file-label">ייבוא נתונים (JSON)</label>
                    </div>
                </div>
                
                <!-- Employees Panel -->
                <div class="panel" id="employees-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">ניהול עובדים</h2>
                        <div>
                            <button class="btn btn-success" id="add-employee-btn">עובד חדש</button>
                        </div>
                    </div>
                    
                    <div class="data-control">
                        <input type="text" class="search-box" id="employee-search" placeholder="חיפוש עובדים...">
                        <button class="btn btn-primary" id="search-employee-btn">חיפוש</button>
                    </div>
                    
                    <table id="employees-table">
                        <thead>
                            <tr>
                                <th>מספר עובד</th>
                                <th>שם</th>
                                <th>תפקיד</th>
                                <th>מחלקה</th>
                                <th>סטטוס</th>
                                <th>פעולות</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be inserted here -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Attendance Panel -->
                <div class="panel" id="attendance-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">דוחות נוכחות</h2>
                        <div>
                            <button class="btn btn-info" id="export-attendance">ייצוא דוח נוכחות</button>
                        </div>
                    </div>
                    
                    <div class="data-control">
                        <input type="date" class="form-control" id="attendance-date-from">
                        <input type="date" class="form-control" id="attendance-date-to">
                        <select class="form-control" id="attendance-employee-filter">
                            <option value="">כל העובדים</option>
                            <!-- Options will be inserted here -->
                        </select>
                        <button class="btn btn-primary" id="filter-attendance-btn">סינון</button>
                    </div>
                    
                    <table id="attendance-table">
                        <thead>
                            <tr>
                                <th>תאריך</th>
                                <th>מספר עובד</th>
                                <th>שם עובד</th>
                                <th>סוג</th>
                                <th>שעה</th>
                                <th>פעולות</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be inserted here -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Production Panel -->
                <div class="panel" id="production-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">פסי ייצור</h2>
                        <div>
                            <button class="btn btn-success" id="add-production-line-btn">הוספת פס ייצור</button>
                        </div>
                    </div>
                    
                    <table id="production-table">
                        <thead>
                            <tr>
                                <th>מספר פס</th>
                                <th>שם פס</th>
                                <th>סטטוס</th>
                                <th>תפוקה יומית</th>
                                <th>עובדים משויכים</th>
                                <th>פעולות</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be inserted here -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Inventory Panel -->
                <div class="panel" id="inventory-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">ניהול מלאי</h2>
                        <div>
                            <button class="btn btn-success" id="add-inventory-btn">הוספת פריט</button>
                            <button class="btn btn-info" id="export-inventory">ייצוא דוח מלאי</button>
                        </div>
                    </div>
                    
                    <div class="data-control">
                        <input type="text" class="search-box" id="inventory-search" placeholder="חיפוש במלאי...">
                        <select class="form-control" id="inventory-category-filter">
                            <option value="">כל הקטגוריות</option>
                            <!-- Options will be inserted here -->
                        </select>
                        <button class="btn btn-primary" id="search-inventory-btn">חיפוש</button>
                    </div>
                    
                    <table id="inventory-table">
                        <thead>
                            <tr>
                                <th>מק"ט</th>
                                <th>שם פריט</th>
                                <th>קטגוריה</th>
                                <th>כמות</th>
                                <th>מחיר</th>
                                <th>סטטוס</th>
                                <th>פעולות</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be inserted here -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Purchases Panel -->
                <div class="panel" id="purchases-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">ניהול רכש</h2>
                        <div>
                            <button class="btn btn-success" id="add-purchase-btn">הזמנה חדשה</button>
                            <button class="btn btn-info" id="export-purchases">ייצוא דוח רכש</button>
                        </div>
                    </div>
                    
                    <div class="data-control">
                        <input type="date" class="form-control" id="purchase-date-from">
                        <input type="date" class="form-control" id="purchase-date-to">
                        <select class="form-control" id="purchase-status-filter">
                            <option value="">כל הסטטוסים</option>
                            <option value="pending">ממתין לאישור</option>
                            <option value="approved">מאושר</option>
                            <option value="ordered">הוזמן</option>
                            <option value="received">התקבל</option>
                            <option value="cancelled">בוטל</option>
                        </select>
                        <button class="btn btn-primary" id="filter-purchases-btn">סינון</button>
                    </div>
                    
                    <table id="purchases-table">
                        <thead>
                            <tr>
                                <th>מספר הזמנה</th>
                                <th>תאריך</th>
                                <th>ספק</th>
                                <th>סכום</th>
                                <th>סטטוס</th>
                                <th>פעולות</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be inserted here -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Logs Panel -->
                <div class="panel" id="logs-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">לוגים ופעילות מערכת</h2>
                        <div>
                            <button class="btn btn-info" id="export-logs">ייצוא לוגים</button>
                        </div>
                    </div>
                    
                    <div class="data-control">
                        <input type="date" class="form-control" id="logs-date-from">
                        <input type="date" class="form-control" id="logs-date-to">
                        <select class="form-control" id="logs-type-filter">
                            <option value="">כל הפעולות</option>
                            <option value="login">כניסה למערכת</option>
                            <option value="attendance">רישום נוכחות</option>
                            <option value="employee">שינוי פרטי עובד</option>
                            <option value="inventory">שינוי מלאי</option>
                            <option value="purchase">פעולות רכש</option>
                        </select>
                        <button class="btn btn-primary" id="filter-logs-btn">סינון</button>
                    </div>
                    
                    <table id="logs-table">
                        <thead>
                            <tr>
                                <th>תאריך ושעה</th>
                                <th>משתמש</th>
                                <th>סוג פעולה</th>
                                <th>תיאור</th>
                                <th>פרטים</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be inserted here -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Settings Panel -->
                <div class="panel" id="settings-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">הגדרות מערכת</h2>
                        <div>
                            <button class="btn btn-primary" id="save-settings-btn">שמירת הגדרות</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="company-name">שם החברה</label>
                        <input type="text" class="form-control" id="company-name">
                    </div>
                    
                    <div class="form-group">
                        <label for="work-hours">שעות עבודה</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="time" class="form-control" id="work-start-time" placeholder="שעת התחלה">
                            <input type="time" class="form-control" id="work-end-time" placeholder="שעת סיום">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="data-backup">גיבוי מידע</label>
                        <select class="form-control" id="data-backup">
                            <option value="daily">יומי</option>
                            <option value="weekly">שבועי</option>
                            <option value="monthly">חודשי</option>
                            <option value="never">אף פעם</option>
                        </select>
                    </div>
                    
                    <h3 style="margin-top: 30px; margin-bottom: 15px;">הרשאות משתמשים</h3>
                    
                    <table id="roles-table">
                        <thead>
                            <tr>
                                <th>תפקיד</th>
                                <th>ניהול עובדים</th>
                                <th>צפייה בנוכחות</th>
                                <th>עריכת נוכחות</th>
                                <th>ניהול מלאי</th>
                                <th>ניהול רכש</th>
                                <th>הגדרות מערכת</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>מנהל</td>
                                <td><input type="checkbox" checked disabled></td>
                                <td><input type="checkbox" checked disabled></td>
                                <td><input type="checkbox" checked disabled></td>
                                <td><input type="checkbox" checked disabled></td>
                                <td><input type="checkbox" checked disabled></td>
                                <td><input type="checkbox" checked disabled></td>
                            </tr>
                            <tr>
                                <td>מנהל משמרת</td>
                                <td><input type="checkbox" checked></td>
                                <td><input type="checkbox" checked></td>
                                <td><input type="checkbox" checked></td>
                                <td><input type="checkbox" checked></td>
                                <td><input type="checkbox"></td>
                                <td><input type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>אחראי מלאי</td>
                                <td><input type="checkbox"></td>
                                <td><input type="checkbox"></td>
                                <td><input type="checkbox"></td>
                                <td><input type="checkbox" checked></td>
                                <td><input type="checkbox" checked></td>
                                <td><input type="checkbox"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modals -->
    <!-- Add/Edit Employee Modal -->
    <div class="modal" id="employee-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">הוספת עובד חדש</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="form-group">
                <label for="employee-id-input">מספר עובד</label>
                <input type="text" class="form-control" id="employee-id-input">
            </div>
            <div class="form-group">
                <label for="employee-name-input">שם מלא</label>
                <input type="text" class="form-control" id="employee-name-input">
            </div>
            <div class="form-group">
                <label for="employee-position">תפקיד</label>
                <input type="text" class="form-control" id="employee-position-input">
            </div>
            <div class="form-group">
                <label for="employee-department">מחלקה</label>
                <select class="form-control" id="employee-department-input">
                    <option value="production">ייצור</option>
                    <option value="logistics">לוגיסטיקה</option>
                    <option value="management">הנהלה</option>
                    <option value="sales">מכירות</option>
                    <option value="it">מחשוב</option>
                </select>
            </div>
            <div class="form-group">
                <label for="employee-status">סטטוס</label>
                <select class="form-control" id="employee-status-input">
                    <option value="active">פעיל</option>
                    <option value="inactive">לא פעיל</option>
                    <option value="vacation">חופשה</option>
                </select>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger close-modal">ביטול</button>
                <button class="btn btn-success" id="save-employee-btn">שמירה</button>
            </div>
        </div>
    </div>
    
    <!-- Add/Edit Inventory Item Modal -->
    <div class="modal" id="inventory-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">הוספת פריט חדש</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="form-group">
                <label for="item-sku-input">מק"ט</label>
                <input type="text" class="form-control" id="item-sku-input">
            </div>
            <div class="form-group">
                <label for="item-name-input">שם פריט</label>
                <input type="text" class="form-control" id="item-name-input">
            </div>
            <div class="form-group">
                <label for="item-category-input">קטגוריה</label>
                <select class="form-control" id="item-category-input">
                    <option value="raw">חומרי גלם</option>
                    <option value="finished">מוצרים מוגמרים</option>
                    <option value="packaging">אריזות</option>
                    <option value="tools">כלי עבודה</option>
                </select>
            </div>
            <div class="form-group">
                <label for="item-quantity-input">כמות</label>
                <input type="number" class="form-control" id="item-quantity-input" min="0">
            </div>
            <div class="form-group">
                <label for="item-price-input">מחיר</label>
                <input type="number" class="form-control" id="item-price-input" step="0.01" min="0">
            </div>
            <div class="form-group">
                <label for="item-status-input">סטטוס</label>
                <select class="form-control" id="item-status-input">
                    <option value="in-stock">במלאי</option>
                    <option value="low">מלאי נמוך</option>
                    <option value="out-of-stock">אזל</option>
                    <option value="on-order">בהזמנה</option>
                </select>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger close-modal">ביטול</button>
                <button class="btn btn-success" id="save-inventory-btn">שמירה</button>
            </div>
        </div>
    </div>

    <script>
        // Utility Functions
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('he-IL');
        }
        
        function formatTime(timeString) {
            const date = new Date(timeString);
            return date.toLocaleTimeString('he-IL');
        }
        
        function formatDateTime(dateTimeString) {
            const date = new Date(dateTimeString);
            return date.toLocaleString('he-IL');
        }
        
        // Navigation
        document.querySelectorAll('.sidebar-nav a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Update active link
                document.querySelectorAll('.sidebar-nav a').forEach(el => el.classList.remove('active'));
                this.classList.add('active');
                
                // Show corresponding panel
                const panelId = this.getAttribute('data-panel');
                document.querySelectorAll('.panel').forEach(panel => panel.classList.remove('active'));
                document.getElementById(panelId).classList.add('active');
            });
        });
        
        // Modal controls
        document.querySelectorAll('.close-modal').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.modal').forEach(modal => modal.classList.remove('active'));
            });
        });
        
        // Handle modal open
        document.getElementById('add-employee-btn').addEventListener('click', function() {
            document.getElementById('employee-modal').classList.add('active');
        });
        
        document.getElementById('add-inventory-btn').addEventListener('click', function() {
            document.getElementById('inventory-modal').classList.add('active');
        });
        
        // Data management
        let employees = JSON.parse(localStorage.getItem('employees')) || [];
        let inventoryItems = JSON.parse(localStorage.getItem('inventoryItems')) || [];
        let productionLines = JSON.parse(localStorage.getItem('productionLines')) || [];
        let purchases = JSON.parse(localStorage.getItem('purchases')) || [];
        
        // Get attendance records
        function getAttendanceRecords() {
            return JSON.parse(localStorage.getItem('attendanceRecords')) || [];
        }
        
        // Save data
        function saveEmployees() {
            localStorage.setItem('employees', JSON.stringify(employees));
        }
        
        function saveInventory() {
            localStorage.setItem('inventoryItems', JSON.stringify(inventoryItems));
        }
        
        function saveProductionLines() {
            localStorage.setItem('productionLines', JSON.stringify(productionLines));
        }
        
        function savePurchases() {
            localStorage.setItem('purchases', JSON.stringify(purchases));
        }
        
        // Load and render data
        function loadDashboardData() {
            document.getElementById('employee-count').textContent = employees.length;
            
            // Count present employees
            const attendanceRecords = getAttendanceRecords();
            const today = new Date().toDateString();
            const todaysRecords = attendanceRecords.filter(record => 
                new Date(record.time).toDateString() === today
            );
            
            const presentEmployees = new Set();
            
            todaysRecords.forEach(record => {
                if (record.type === 'clock-in') {
                    presentEmployees.add(record.employeeId);
                } else if (record.type === 'clock-out') {
                    presentEmployees.delete(record.employeeId);
                }
            });
            
            document.getElementById('present-count').textContent = presentEmployees.size;
            document.getElementById('inventory-count').textContent = inventoryItems.length;
            document.getElementById('orders-count').textContent = purchases.filter(p => p.status !== 'received' && p.status !== 'cancelled').length;
        }
        
        function renderEmployeesTable() {
            const tbody = document.querySelector('#employees-table tbody');
            tbody.innerHTML = '';
            
            employees.forEach(employee => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${employee.id}</td>
                    <td>${employee.name}</td>
                    <td>${employee.position || '-'}</td>
                    <td>${employee.department || '-'}</td>
                    <td>${employee.status || 'פעיל'}</td>
                    <td>
                        <button class="btn btn-warning action-btn edit-employee" data-id="${employee.id}">עריכה</button>
                        <button class="btn btn-danger action-btn delete-employee" data-id="${employee.id}">מחיקה</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            
            // Add event listeners to action buttons
            document.querySelectorAll('.edit-employee').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    editEmployee(id);
                });
            });
            
            document.querySelectorAll('.delete-employee').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    if (confirm('האם אתה בטוח שברצונך למחוק עובד זה?')) {
                        deleteEmployee(id);
                    }
                });
            });
        }
        
        function renderAttendanceTable() {
            const tbody = document.querySelector('#attendance-table tbody');
            tbody.innerHTML = '';
            
            const records = getAttendanceRecords();
            
            records.sort((a, b) => b.timestamp - a.timestamp).forEach(record => {
                const dateTime = new Date(record.time);
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${formatDate(dateTime)}</td>
                    <td>${record.employeeId}</td>
                    <td>${record.employeeName}</td>
                    <td>${record.type === 'clock-in' ? 'כניסה' : 'יציאה'}</td>
                    <td>${formatTime(dateTime)}</td>
                    <td>
                        <button class="btn btn-danger action-btn delete-record" data-time="${record.timestamp}">מחיקה</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            
            // Add event listeners
            document.querySelectorAll('.delete-record').forEach(btn => {
                btn.addEventListener('click', function() {
                    const timestamp = this.getAttribute('data-time');
                    if (confirm('האם אתה בטוח שברצונך למחוק רשומה זו?')) {
                        deleteAttendanceRecord(timestamp);
                    }
                });
            });
        }
        
        function renderInventoryTable() {
            const tbody = document.querySelector('#inventory-table tbody');
            tbody.innerHTML = '';
            
            inventoryItems.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${item.sku}</td>
                    <td>${item.name}</td>
                    <td>${item.category || '-'}</td>
                    <td>${item.quantity || 0}</td>
                    <td>${item.price ? '₪' + item.price : '-'}</td>
                    <td>${item.status || 'במלאי'}</td>
                    <td>
                        <button class="btn btn-warning action-btn edit-item" data-sku="${item.sku}">עריכה</button>
                        <button class="btn btn-danger action-btn delete-item" data-sku="${item.sku}">מחיקה</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            
            // Add event listeners
            document.querySelectorAll('.edit-item').forEach(btn => {
                btn.addEventListener('click', function() {
                    const sku = this.getAttribute('data-sku');
                    editInventoryItem(sku);
                });
            });
            
            document.querySelectorAll('.delete-item').forEach(btn => {
                btn.addEventListener('click', function() {
                    const sku = this.getAttribute('data-sku');
                    if (confirm('האם אתה בטוח שברצונך למחוק פריט זה?')) {
                        deleteInventoryItem(sku);
                    }
                });
            });
        }
        
        // CRUD Operations
        // Employees
        function addEmployee(employee) {
            employees.push(employee);
            saveEmployees();
            renderEmployeesTable();
        }
        
        function editEmployee(id) {
            const employee = employees.find(e => e.id === id);
            if (!employee) return;
            
            // Populate form
            document.getElementById('employee-id-input').value = employee.id;
            document.getElementById('employee-name-input').value = employee.name;
            document.getElementById('employee-position-input').value = employee.position || '';
            document.getElementById('employee-department-input').value = employee.department || 'production';
            document.getElementById('employee-status-input').value = employee.status || 'active';
            
            // Update modal title
            document.querySelector('#employee-modal .modal-title').textContent = 'עריכת פרטי עובד';
            
            // Show modal
            document.getElementById('employee-modal').classList.add('active');
            
            // Save handler
            document.getElementById('save-employee-btn').onclick = function() {
                employee.name = document.getElementById('employee-name-input').value;
                employee.position = document.getElementById('employee-position-input').value;
                employee.department = document.getElementById('employee-department-input').value;
                employee.status = document.getElementById('employee-status-input').value;
                
                saveEmployees();
                renderEmployeesTable();
                
                document.getElementById('employee-modal').classList.remove('active');
            };
        }
        
        function deleteEmployee(id) {
            employees = employees.filter(e => e.id !== id);
            saveEmployees();
            renderEmployeesTable();
        }
        
        // Attendance records
        function deleteAttendanceRecord(timestamp) {
            const records = getAttendanceRecords().filter(r => r.timestamp != timestamp);
            localStorage.setItem('attendanceRecords', JSON.stringify(records));
            renderAttendanceTable();
        }
        
        // Inventory
        function addInventoryItem(item) {
            inventoryItems.push(item);
            saveInventory();
            renderInventoryTable();
        }
        
        function editInventoryItem(sku) {
            const item = inventoryItems.find(i => i.sku === sku);
            if (!item) return;
            
            // Populate form
            document.getElementById('item-sku-input').value = item.sku;
            document.getElementById('item-name-input').value = item.name;
            document.getElementById('item-category-input').value = item.category || 'raw';
            document.getElementById('item-quantity-input').value = item.quantity || 0;
            document.getElementById('item-price-input').value = item.price || '';
            document.getElementById('item-status-input').value = item.status || 'in-stock';
            
            // Update modal title
            document.querySelector('#inventory-modal .modal-title').textContent = 'עריכת פריט';
            
            // Show modal
            document.getElementById('inventory-modal').classList.add('active');
            
            // Save handler
            document.getElementById('save-inventory-btn').onclick = function() {
                item.name = document.getElementById('item-name-input').value;
                item.category = document.getElementById('item-category-input').value;
                item.quantity = parseInt(document.getElementById('item-quantity-input').value) || 0;
                item.price = parseFloat(document.getElementById('item-price-input').value) || 0;
                item.status = document.getElementById('item-status-input').value;
                
                saveInventory();
                renderInventoryTable();
                
                document.getElementById('inventory-modal').classList.remove('active');
            };
        }
        
        function deleteInventoryItem(sku) {
            inventoryItems = inventoryItems.filter(i => i.sku !== sku);
            saveInventory();
            renderInventoryTable();
        }
        
        // Import/Export
        document.getElementById('export-all-data').addEventListener('click', function() {
            const data = {
                employees: employees,
                attendanceRecords: getAttendanceRecords(),
                inventoryItems: inventoryItems,
                productionLines: productionLines,
                purchases: purchases
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'system-data.json';
            
            let linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        });
        
        document.getElementById('import-file').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.employees) {
                        employees = data.employees;
                        saveEmployees();
                    }
                    
                    if (data.attendanceRecords) {
                        localStorage.setItem('attendanceRecords', JSON.stringify(data.attendanceRecords));
                    }
                    
                    if (data.inventoryItems) {
                        inventoryItems = data.inventoryItems;
                        saveInventory();
                    }
                    
                    if (data.productionLines) {
                        productionLines = data.productionLines;
                        saveProductionLines();
                    }
                    
                    if (data.purchases) {
                        purchases = data.purchases;
                        savePurchases();
                    }
                    
                    // Reload data
                    loadDashboardData();
                    renderEmployeesTable();
                    renderAttendanceTable();
                    renderInventoryTable();
                    
                    alert('נתונים יובאו בהצלחה!');
                } catch (error) {
                    alert('שגיאה בייבוא נתונים: ' + error.message);
                }
            };
            reader.readAsText(file);
        });
        
        // Setup form submission handlers
        document.getElementById('save-employee-btn').addEventListener('click', function() {
            const id = document.getElementById('employee-id-input').value;
            const name = document.getElementById('employee-name-input').value;
            const position = document.getElementById('employee-position-input').value;
            const department = document.getElementById('employee-department-input').value;
            const status = document.getElementById('employee-status-input').value;
            
            if (!id || !name) {
                alert('נא למלא שדות חובה');
                return;
            }
            
            // Check if employee exists
            const existingIndex = employees.findIndex(e => e.id === id);
            
            if (existingIndex >= 0) {
                // Update existing
                employees[existingIndex] = {
                    id,
                    name,
                    position,
                    department,
                    status
                };
            } else {
                // Add new
                employees.push({
                    id,
                    name,
                    position,
                    department,
                    status
                });
            }
            
            saveEmployees();
            renderEmployeesTable();
            document.getElementById('employee-modal').classList.remove('active');
        });
        
        document.getElementById('save-inventory-btn').addEventListener('click', function() {
            const sku = document.getElementById('item-sku-input').value;
            const name = document.getElementById('item-name-input').value;
            const category = document.getElementById('item-category-input').value;
            const quantity = parseInt(document.getElementById('item-quantity-input').value) || 0;
            const price = parseFloat(document.getElementById('item-price-input').value) || 0;
            const status = document.getElementById('item-status-input').value;
            
            if (!sku || !name) {
                alert('נא למלא שדות חובה');
                return;
            }
            
            // Check if item exists
            const existingIndex = inventoryItems.findIndex(i => i.sku === sku);
            
            if (existingIndex >= 0) {
                // Update existing
                inventoryItems[existingIndex] = {
                    sku,
                    name,
                    category,
                    quantity,
                    price,
                    status
                };
            } else {
                // Add new
                inventoryItems.push({
                    sku,
                    name,
                    category,
                    quantity,
                    price,
                    status
                });
            }
            
            saveInventory();
            renderInventoryTable();
            document.getElementById('inventory-modal').classList.remove('active');
        });
        
        // Export specific data
        document.getElementById('export-attendance').addEventListener('click', function() {
            const records = getAttendanceRecords();
            exportJsonData(records, 'attendance-records.json');
        });
        
        document.getElementById('export-inventory').addEventListener('click', function() {
            exportJsonData(inventoryItems, 'inventory-data.json');
        });
        
        document.getElementById('export-logs').addEventListener('click', function() {
            const logs = JSON.parse(localStorage.getItem('systemLogs')) || [];
            exportJsonData(logs, 'system-logs.json');
        });
        
        document.getElementById('export-purchases').addEventListener('click', function() {
            exportJsonData(purchases, 'purchases-data.json');
        });
        
        function exportJsonData(data, filename) {
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            let linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', filename);
            linkElement.click();
        }
        
        // Filter functions
        document.getElementById('search-employee-btn').addEventListener('click', function() {
            const searchTerm = document.getElementById('employee-search').value.toLowerCase();
            
            const filteredEmployees = searchTerm ? 
                employees.filter(e => 
                    e.id.toLowerCase().includes(searchTerm) || 
                    e.name.toLowerCase().includes(searchTerm) ||
                    (e.position && e.position.toLowerCase().includes(searchTerm)) ||
                    (e.department && e.department.toLowerCase().includes(searchTerm))
                ) : employees;
            
            renderFilteredEmployeesTable(filteredEmployees);
        });
        
        document.getElementById('filter-attendance-btn').addEventListener('click', function() {
            const dateFrom = document.getElementById('attendance-date-from').value;
            const dateTo = document.getElementById('attendance-date-to').value;
            const employeeFilter = document.getElementById('attendance-employee-filter').value;
            
            let records = getAttendanceRecords();
            
            if (dateFrom) {
                const fromDate = new Date(dateFrom);
                records = records.filter(r => new Date(r.time) >= fromDate);
            }
            
            if (dateTo) {
                const toDate = new Date(dateTo);
                toDate.setHours(23, 59, 59, 999); // End of day
                records = records.filter(r => new Date(r.time) <= toDate);
            }
            
            if (employeeFilter) {
                records = records.filter(r => r.employeeId === employeeFilter);
            }
            
            renderFilteredAttendanceTable(records);
        });
        
        document.getElementById('search-inventory-btn').addEventListener('click', function() {
            const searchTerm = document.getElementById('inventory-search').value.toLowerCase();
            const categoryFilter = document.getElementById('inventory-category-filter').value;
            
            let filtered = inventoryItems;
            
            if (searchTerm) {
                filtered = filtered.filter(i => 
                    i.sku.toLowerCase().includes(searchTerm) || 
                    i.name.toLowerCase().includes(searchTerm)
                );
            }
            
            if (categoryFilter) {
                filtered = filtered.filter(i => i.category === categoryFilter);
            }
            
            renderFilteredInventoryTable(filtered);
        });
        
        function renderFilteredEmployeesTable(filteredEmployees) {
            const tbody = document.querySelector('#employees-table tbody');
            tbody.innerHTML = '';
            
            filteredEmployees.forEach(employee => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${employee.id}</td>
                    <td>${employee.name}</td>
                    <td>${employee.position || '-'}</td>
                    <td>${employee.department || '-'}</td>
                    <td>${employee.status || 'פעיל'}</td>
                    <td>
                        <button class="btn btn-warning action-btn edit-employee" data-id="${employee.id}">עריכה</button>
                        <button class="btn btn-danger action-btn delete-employee" data-id="${employee.id}">מחיקה</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            
            // Reattach event listeners
            document.querySelectorAll('.edit-employee').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    editEmployee(id);
                });
            });
            
            document.querySelectorAll('.delete-employee').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    if (confirm('האם אתה בטוח שברצונך למחוק עובד זה?')) {
                        deleteEmployee(id);
                    }
                });
            });
        }
        
        function renderFilteredAttendanceTable(filteredRecords) {
            const tbody = document.querySelector('#attendance-table tbody');
            tbody.innerHTML = '';
            
            filteredRecords.sort((a, b) => b.timestamp - a.timestamp).forEach(record => {
                const dateTime = new Date(record.time);
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${formatDate(dateTime)}</td>
                    <td>${record.employeeId}</td>
                    <td>${record.employeeName}</td>
                    <td>${record.type === 'clock-in' ? 'כניסה' : 'יציאה'}</td>
                    <td>${formatTime(dateTime)}</td>
                    <td>
                        <button class="btn btn-danger action-btn delete-record" data-time="${record.timestamp}">מחיקה</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            
            // Reattach event listeners
            document.querySelectorAll('.delete-record').forEach(btn => {
                btn.addEventListener('click', function() {
                    const timestamp = this.getAttribute('data-time');
                    if (confirm('האם אתה בטוח שברצונך למחוק רשומה זו?')) {
                        deleteAttendanceRecord(timestamp);
                    }
                });
            });
        }
        
        function renderFilteredInventoryTable(filteredItems) {
            const tbody = document.querySelector('#inventory-table tbody');
            tbody.innerHTML = '';
            
            filteredItems.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${item.sku}</td>
                    <td>${item.name}</td>
                    <td>${item.category || '-'}</td>
                    <td>${item.quantity || 0}</td>
                    <td>${item.price ? '₪' + item.price : '-'}</td>
                    <td>${item.status || 'במלאי'}</td>
                    <td>
                        <button class="btn btn-warning action-btn edit-item" data-sku="${item.sku}">עריכה</button>
                        <button class="btn btn-danger action-btn delete-item" data-sku="${item.sku}">מחיקה</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            
            // Reattach event listeners
            document.querySelectorAll('.edit-item').forEach(btn => {
                btn.addEventListener('click', function() {
                    const sku = this.getAttribute('data-sku');
                    editInventoryItem(sku);
                });
            });
            
            document.querySelectorAll('.delete-item').forEach(btn => {
                btn.addEventListener('click', function() {
                    const sku = this.getAttribute('data-sku');
                    if (confirm('האם אתה בטוח שברצונך למחוק פריט זה?')) {
                        deleteInventoryItem(sku);
                    }
                });
            });
        }
        
        // Populate employee dropdown for attendance filtering
        function populateEmployeeDropdown() {
            const select = document.getElementById('attendance-employee-filter');
            select.innerHTML = '<option value="">כל העובדים</option>';
            
            employees.forEach(employee => {
                const option = document.createElement('option');
                option.value = employee.id;
                option.textContent = `${employee.name} (${employee.id})`;
                select.appendChild(option);
            });
        }
        
        // Populate inventory category dropdown
        function populateInventoryCategoryDropdown() {
            const select = document.getElementById('inventory-category-filter');
            select.innerHTML = '<option value="">כל הקטגוריות</option>';
            
            const categories = [...new Set(inventoryItems.map(item => item.category).filter(Boolean))];
            
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                select.appendChild(option);
            });
        }
        
        // Log system activity
        function logActivity(action, description, details = {}) {
            const logs = JSON.parse(localStorage.getItem('systemLogs')) || [];
            
            logs.push({
                timestamp: Date.now(),
                time: new Date().toISOString(),
                user: 'admin', // In a real system, this would be the logged-in user
                action,
                description,
                details
            });
            
            localStorage.setItem('systemLogs', JSON.stringify(logs));
        }
        
        // Set initial values for date filters
        function setDefaultDateFilters() {
            const today = new Date();
            const lastMonth = new Date();
            lastMonth.setMonth(lastMonth.getMonth() - 1);
            
            const formatDateForInput = (date) => {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            };
            
            // Set attendance date filters
            document.getElementById('attendance-date-from').value = formatDateForInput(lastMonth);
            document.getElementById('attendance-date-to').value = formatDateForInput(today);
            
            // Set logs date filters
            document.getElementById('logs-date-from').value = formatDateForInput(lastMonth);
            document.getElementById('logs-date-to').value = formatDateForInput(today);
            
            // Set purchase date filters
            document.getElementById('purchase-date-from').value = formatDateForInput(lastMonth);
            document.getElementById('purchase-date-to').value = formatDateForInput(today);
        }
        
        // Save settings
        document.getElementById('save-settings-btn').addEventListener('click', function() {
            const settings = {
                companyName: document.getElementById('company-name').value,
                workStartTime: document.getElementById('work-start-time').value,
                workEndTime: document.getElementById('work-end-time').value,
                dataBackup: document.getElementById('data-backup').value
            };
            
            localStorage.setItem('systemSettings', JSON.stringify(settings));
            alert('ההגדרות נשמרו בהצלחה!');
            logActivity('settings', 'הגדרות מערכת עודכנו', settings);
        });
        
        // Load settings
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('systemSettings')) || {};
            
            document.getElementById('company-name').value = settings.companyName || '';
            document.getElementById('work-start-time').value = settings.workStartTime || '';
            document.getElementById('work-end-time').value = settings.workEndTime || '';
            document.getElementById('data-backup').value = settings.dataBackup || 'daily';
        }
        
        // Initialize
        function init() {
            loadDashboardData();
            renderEmployeesTable();
            renderAttendanceTable();
            renderInventoryTable();
            populateEmployeeDropdown();
            populateInventoryCategoryDropdown();
            setDefaultDateFilters();
            loadSettings();
            
            // Add some sample data if none exists
            if (employees.length === 0) {
                employees = [
                    { id: '1001', name: 'ישראל ישראלי', position: 'מנהל ייצור', department: 'production', status: 'active' },
                    { id: '1002', name: 'שרה כהן', position: 'עובדת ייצור', department: 'production', status: 'active' },
                    { id: '1003', name: 'משה לוי', position: 'אחראי מלאי', department: 'logistics', status: 'active' },
                    { id: '1004', name: 'רחל גולדברג', position: 'מנהלת משמרת', department: 'production', status: 'active' },
                    { id: '1005', name: 'דוד אברהם', position: 'עובד ייצור', department: 'production', status: 'vacation' }
                ];
                saveEmployees();
                renderEmployeesTable();
            }
            
            if (inventoryItems.length === 0) {
                inventoryItems = [
                    { sku: 'RM001', name: 'חומר גלם A', category: 'raw', quantity: 500, price: 25, status: 'in-stock' },
                    { sku: 'RM002', name: 'חומר גלם B', category: 'raw', quantity: 250, price: 40, status: 'in-stock' },
                    { sku: 'P001', name: 'מוצר מוגמר X', category: 'finished', quantity: 100, price: 120, status: 'in-stock' },
                    { sku: 'P002', name: 'מוצר מוגמר Y', category: 'finished', quantity: 75, price: 180, status: 'in-stock' },
                    { sku: 'PKG001', name: 'אריזה קטנה', category: 'packaging', quantity: 1000, price: 2, status: 'in-stock' },
                    { sku: 'T001', name: 'כלי עבודה', category: 'tools', quantity: 20, price: 150, status: 'in-stock' }
                ];
                saveInventory();
                renderInventoryTable();
                populateInventoryCategoryDropdown();
            }
            
            // Refresh dropdowns
            populateEmployeeDropdown();
        }
        
        // Run initialization
        init();
    </script>
</body>
</html>